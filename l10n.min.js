//@source http://purl.eligrey.com/github/l10n.js/blob/master/l10n.js
(function(s){"use strict";var u="undefined",l="string",q=Object.prototype.hasOwnProperty,f={},r={},t={},k=!1,m,n=function(i){return r[i]||(r[i]=i.toLowerCase().replace(/-x-/g,"-"))},p=function(v){var i=new m();i.open("GET",v,k);i.send(null);if(i.status!==200){setTimeout(function(){var w=new Error("Unable to load localization data: "+v);w.name="Localization Error";throw w},0);return{}}else{return JSON.parse(i.responseText)}},j=s.toLocaleString=function(w){if(arguments.length>0&&typeof w!=="number"){if(typeof w===l){j(p(w))}else{if(w===k){t={}}else{for(var i in w){if(q.call(w,i)){var x=w[i];i=n(i);if(!(i in t)||x===k){t[i]={}}if(x===k){continue}if(typeof x===l){if(n(s.locale).indexOf(i)===0){x=p(x)}else{if(!(i in f)){f[i]=[]}f[i].push(x);continue}}for(var v in x){if(q.call(x,v)){t[i][v]=x[v]}}}}}}}return Function.prototype.toLocaleString.apply(s,arguments)},a=function(x){var w=f[x],y=0,v=w.length;for(;y<v;y++){var z={};z[x]=p(w[y]);j(z)}delete f[x]};if(typeof XMLHttpRequest===u&&typeof ActiveXObject!==u){var d=ActiveXObject;m=function(){try{return new d("Msxml2.XMLHTTP.6.0")}catch(v){}try{return new d("Msxml2.XMLHTTP.3.0")}catch(i){}try{return new d("Msxml2.XMLHTTP")}catch(w){}throw new Error("XMLHttpRequest not supported by this browser.")}}else{m=XMLHttpRequest}if(!s.locale){if(typeof navigator!==u){var h=navigator;s.locale=h.language||h.userLanguage||""}else{s.locale=""}}if(typeof document!==u){var b=document.getElementsByTagName("link"),o=b.length;while(o--){var e=b[o],c=(e.getAttribute("rel")||"").toLowerCase().split(/\s+/);if(c.indexOf("localizations")!==-1){j(e.getAttribute("href"))}else{if(c.indexOf("localization")!==-1){var g={};g[n(e.getAttribute("hreflang")||"")]=e.getAttribute("href");j(g)}}}}s.prototype.toLocaleString=function(){var y=n(s.locale).split("-"),x=y.length,w=this.valueOf();while(x){var v=y.slice(0,x--).join("-");if(v in f){a(v)}if(v in t&&w in t[v]){return t[v][w]}}return w}}(String));
